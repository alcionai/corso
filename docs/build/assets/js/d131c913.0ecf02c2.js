"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[197],{5162:(e,n,t)=>{t.d(n,{Z:()=>i});var a=t(7294),o=t(6010);const r="tabItem_Ymn6";function i(e){let{children:n,hidden:t,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,i),hidden:t},n)}},5488:(e,n,t)=>{t.d(n,{Z:()=>m});var a=t(7462),o=t(7294),r=t(6010),i=t(2389),l=t(7392),s=t(7094),u=t(2466);const c="tabList__CuJ",p="tabItem_LNqP";function d(e){var n;const{lazy:t,block:i,defaultValue:d,values:m,groupId:E,className:f}=e,S=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=m??S.map((e=>{let{props:{value:n,label:t,attributes:a}}=e;return{value:n,label:t,attributes:a}})),v=(0,l.l)(k,((e,n)=>e.value===n.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const C=null===d?d:d??(null==(n=S.find((e=>e.props.default)))?void 0:n.props.value)??S[0].props.value;if(null!==C&&!k.some((e=>e.value===C)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${C}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:N,setTabGroupChoices:h}=(0,s.U)(),[_,b]=(0,o.useState)(C),T=[],{blockElementScrollPositionUntilNextRender:A}=(0,u.o5)();if(null!=E){const e=N[E];null!=e&&e!==_&&k.some((n=>n.value===e))&&b(e)}const g=e=>{const n=e.currentTarget,t=T.indexOf(n),a=k[t].value;a!==_&&(A(n),b(a),null!=E&&h(E,String(a)))},I=e=>{var n;let t=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const n=T.indexOf(e.currentTarget)+1;t=T[n]??T[0];break}case"ArrowLeft":{const n=T.indexOf(e.currentTarget)-1;t=T[n]??T[T.length-1];break}}null==(n=t)||n.focus()};return o.createElement("div",{className:(0,r.Z)("tabs-container",c)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},f)},k.map((e=>{let{value:n,label:t,attributes:i}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:_===n?0:-1,"aria-selected":_===n,key:n,ref:e=>T.push(e),onKeyDown:I,onClick:g},i,{className:(0,r.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":_===n})}),t??n)}))),t?(0,o.cloneElement)(S.filter((e=>e.props.value===_))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},S.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==_})))))}function m(e){const n=(0,i.Z)();return o.createElement(d,(0,a.Z)({key:String(n)},e))}},1895:(e,n,t)=>{t.d(n,{G:()=>o});t(7294);var a=t(2263);const o=()=>{const{siteConfig:e}=(0,a.Z)();return e.customFields.corsoVersion}},642:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>f,frontMatter:()=>u,metadata:()=>p,toc:()=>m});var a=t(7462),o=(t(7294),t(3905)),r=(t(8209),t(814)),i=t(5488),l=t(5162),s=t(1895);const u={},c="Configuration",p={unversionedId:"setup/configuration",id:"setup/configuration",title:"Configuration",description:"Two things are needed to configure Corso:",source:"@site/docs/setup/configuration.md",sourceDirName:"setup",slug:"/setup/configuration",permalink:"/docs/setup/configuration",draft:!1,editUrl:"https://github.com/alcionai/corso/tree/main/docs/docs/setup/configuration.md",tags:[],version:"current",frontMatter:{}},d={},m=[{value:"Environment variables",id:"environment-variables",level:2},{value:"Configuration File",id:"configuration-file",level:2}],E={toc:m};function f(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,a.Z)({},E,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"Two things are needed to configure Corso:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Environment variables containing configuration information"),(0,o.kt)("li",{parentName:"ul"},"A directory for Corso to store its configuration file")),(0,o.kt)("h2",{id:"environment-variables"},"Environment variables"),(0,o.kt)("p",null,"Three distinct pieces of configuration are required by Corso:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"S3 object storage configuration to store backups. See ",(0,o.kt)("a",{parentName:"p",href:"repos#s3-creds-setup"},"AWS Credentials Setup")," for\nalternate ways to pass AWS credentials."),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AWS_ACCESS_KEY_ID"),": Access key for an IAM user or role for accessing an S3 bucket"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AWS_SECRET_ACCESS_KEY"),": Secret key associated with the access key"),(0,o.kt)("li",{parentName:"ul"},"(Optional) ",(0,o.kt)("inlineCode",{parentName:"li"},"AWS_SESSION_TOKEN"),": Session token required when using temporary credentials"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Microsoft 365 Configuration"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AZURE_CLIENT_ID"),": Client ID for your Azure AD application used to access your M365 tenant"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AZURE_TENANT_ID"),": ID for the M365 tenant where the Azure AD application is registered"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AZURE_CLIENT_SECRET"),": Azure secret for your Azure AD application used to access your M365 tenant"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"Corso Security Passphrase"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"CORSO_PASSPHRASE"),": Passphrase to protect encrypted repository contents")))),(0,o.kt)(i.Z,{groupId:"os",mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"win",label:"Powershell",mdxType:"TabItem"},(0,o.kt)("p",null,"Ensure that all of the above environment variables are defined in your Powershell environment."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-powershell"},'$Env:AWS_ACCESS_KEY_ID = "..."\n$Env:AWS_SECRET_ACCESS_KEY = "..."\n$Env:AWS_SESSION_TOKEN = ""\n\n$Env:AZURE_CLIENT_ID = "..."\n$Env:AZURE_TENANT_ID = "..."\n$Env:AZURE_CLIENT_SECRET = "..."\n\n$Env:CORSO_PASSPHRASE = "CHANGE-ME-THIS-IS-INSECURE"\n'))),(0,o.kt)(l.Z,{value:"unix",label:"Linux/macOS",mdxType:"TabItem"},(0,o.kt)("p",null,"Ensure that all of the above environment variables are defined in your shell environment."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"export AWS_ACCESS_KEY_ID=...\nexport AWS_SECRET_ACCESS_KEY=...\nexport AWS_SESSION_TOKEN=...\n\nexport AZURE_CLIENT_ID=...\nexport AZURE_TENANT_ID=...\nexport AZURE_CLIENT_SECRET=...\n\nexport CORSO_PASSPHRASE=CHANGE-ME-THIS-IS-INSECURE\n"))),(0,o.kt)(l.Z,{value:"docker",label:"Docker",mdxType:"TabItem"},(0,o.kt)("p",null,"For ease of use with Docker, we recommend adding the names of the required environment variables (but not their\nvalues!) to a ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/run/#set-environment-variables--e---env---env-file"},"Docker environment variables file"),".\nTo create the environment variables file, you can run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Create an environment variables file\nmkdir -p $HOME/.corso\ncat <<EOF > $HOME/.corso/corso.env\nAWS_ACCESS_KEY_ID\nAWS_SECRET_ACCESS_KEY\nAWS_SESSION_TOKEN\nAZURE_CLIENT_ID\nAZURE_TENANT_ID\nAZURE_CLIENT_SECRET\nCORSO_PASSPHRASE\nEOF\n\n# Export required variables\nexport AWS_ACCESS_KEY_ID=...\nexport AWS_SECRET_ACCESS_KEY=...\nexport AWS_SESSION_TOKEN=...\n\nexport AZURE_CLIENT_ID=...\nexport AZURE_TENANT_ID=...\nexport AZURE_CLIENT_SECRET=...\n\nexport CORSO_PASSPHRASE=CHANGE-ME-THIS-IS-INSECURE\n")))),(0,o.kt)("h2",{id:"configuration-file"},"Configuration File"),(0,o.kt)(i.Z,{groupId:"os",mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"win",label:"Powershell",mdxType:"TabItem"},(0,o.kt)("p",null,"By default, Corso stores its configuration file (",(0,o.kt)("inlineCode",{parentName:"p"},".corso.toml"),") in the user's home directory.\nThe location of the configuration file can be specified using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--config-file")," option.")),(0,o.kt)(l.Z,{value:"unix",label:"Linux/macOS",mdxType:"TabItem"},(0,o.kt)("p",null,"By default, Corso stores its configuration file (",(0,o.kt)("inlineCode",{parentName:"p"},".corso.toml"),") in the user's home directory.\nThe location of the configuration file can be specified using the ",(0,o.kt)("inlineCode",{parentName:"p"},"--config-file")," option.")),(0,o.kt)(l.Z,{value:"docker",label:"Docker",mdxType:"TabItem"},(0,o.kt)("p",null,"To preserve configuration across container runs, Corso requires access to a directory outside of its Docker container\nto read or create its configuration file (",(0,o.kt)("inlineCode",{parentName:"p"},".corso.toml"),"). This directory must be mapped, by Docker, to the ",(0,o.kt)("inlineCode",{parentName:"p"},"/app/corso"),"\ndirectory within the container."),(0,o.kt)(r.Z,{language:"bash",mdxType:"CodeBlock"},`docker run --env-file $HOME/.corso/corso.env \\\n  --volume $HOME/.corso:/app/corso ghcr.io/alcionai/corso:${(0,s.G)()} \\\n  <command> <command options>`))))}f.isMDXComponent=!0},8209:(e,n,t)=>{t(7294)}}]);